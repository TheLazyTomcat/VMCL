Function Matrix_Conversions(AutoTest: Boolean = False): Integer;
var
  m2s:    TVMCLMatrix2s;
  m3s:    TVMCLMatrix3s;
  m4s:    TVMCLMatrix4s;
  m2d:    TVMCLMatrix2d;
  m3d:    TVMCLMatrix3d;
  m4d:    TVMCLMatrix4d;
  Idt:    Boolean;
begin
WriteLn;
WriteLn(LineText('Matrix conversions'));
WriteLn;
RandomMat(m2s); RandomMat(m3s); RandomMat(m4s);
RandomMat(m2d); RandomMat(m3d); RandomMat(m4d);
WriteLn('Higher to lower dimension:');
WriteLn;
WriteLn('m3s -> m2s:'); WriteLn; WriteLn(MatToStr(m3s)); WriteLn; WriteLn(MatToStr(Matrix2(m3s)));
WriteLn;
WriteLn('m4s -> m2s:'); WriteLn; WriteLn(MatToStr(m4s)); WriteLn; WriteLn(MatToStr(Matrix2(m4s)));
WriteLn;
WriteLn('m4s -> m3s:'); WriteLn; WriteLn(MatToStr(m4s)); WriteLn; WriteLn(MatToStr(Matrix3(m4s)));
WriteLn;
WriteLn('m3d -> m2d:'); WriteLn; WriteLn(MatToStr(m3d)); WriteLn; WriteLn(MatToStr(Matrix2(m3d)));
WriteLn;
WriteLn('m4d -> m2s:'); WriteLn; WriteLn(MatToStr(m4d)); WriteLn; WriteLn(MatToStr(Matrix2(m4d)));
WriteLn;
WriteLn('m4d -> m3d:'); WriteLn; WriteLn(MatToStr(m4d)); WriteLn; WriteLn(MatToStr(Matrix3(m4d)));
WriteLn;
RandomMat(m2s); RandomMat(m3s); RandomMat(m4s);
RandomMat(m2d); RandomMat(m3d); RandomMat(m4d);
WriteLn(Splitter);
WriteLn;
WriteLn('Lower to higher dimension:');
WriteLn; Idt := Random(2) = 0;
WriteLn('m2s -> m3s (Identity: ' + BoolToStr(Idt,True) + '):'); WriteLn; WriteLn(MatToStr(m2s)); WriteLn; WriteLn(MatToStr(Matrix3(m2s,Idt)));
WriteLn; Idt := Random(2) = 0;
WriteLn('m2s -> m4s (Identity: ' + BoolToStr(Idt,True) + '):'); WriteLn; WriteLn(MatToStr(m2s)); WriteLn; WriteLn(MatToStr(Matrix4(m2s,Idt)));
WriteLn; Idt := Random(2) = 0;
WriteLn('m3s -> m4s (Identity: ' + BoolToStr(Idt,True) + '):'); WriteLn; WriteLn(MatToStr(m3s)); WriteLn; WriteLn(MatToStr(Matrix4(m3s,Idt)));
WriteLn; Idt := Random(2) = 0;
WriteLn('m2d -> m3d (Identity: ' + BoolToStr(Idt,True) + '):'); WriteLn; WriteLn(MatToStr(m2d)); WriteLn; WriteLn(MatToStr(Matrix3(m2d,Idt)));
WriteLn; Idt := Random(2) = 0;
WriteLn('m2d -> m4d (Identity: ' + BoolToStr(Idt,True) + '):'); WriteLn; WriteLn(MatToStr(m2d)); WriteLn; WriteLn(MatToStr(Matrix4(m2d,Idt)));
WriteLn; Idt := Random(2) = 0;
WriteLn('m3d -> m4d (Identity: ' + BoolToStr(Idt,True) + '):'); WriteLn; WriteLn(MatToStr(m3d)); WriteLn; WriteLn(MatToStr(Matrix4(m3d,Idt)));
WriteLn;
RandomMat(m2s); RandomMat(m3s); RandomMat(m4s);
RandomMat(m2d); RandomMat(m3d); RandomMat(m4d);
WriteLn(Splitter);
WriteLn;
WriteLn('Precision coversion:');
WriteLn;
WriteLn('m2d -> m2s: '); WriteLn; WriteLn(MatToStr(m2d)); WriteLn; WriteLn(MatToStr(Matrix2s(m2d)));
WriteLn;
WriteLn('m3d -> m3s: '); WriteLn; WriteLn(MatToStr(m3d)); WriteLn; WriteLn(MatToStr(Matrix3s(m3d)));
WriteLn;
WriteLn('m4d -> m4s: '); WriteLn; WriteLn(MatToStr(m4d)); WriteLn; WriteLn(MatToStr(Matrix4s(m4d)));
WriteLn;
WriteLn('m2s -> m2d: '); WriteLn; WriteLn(MatToStr(m2s)); WriteLn; WriteLn(MatToStr(Matrix2d(m2s)));
WriteLn;
WriteLn('m3s -> m3d: '); WriteLn; WriteLn(MatToStr(m3s)); WriteLn; WriteLn(MatToStr(Matrix3d(m3s)));
WriteLn;
WriteLn('m4s -> m4d: '); WriteLn; WriteLn(MatToStr(m4s)); WriteLn; WriteLn(MatToStr(Matrix4d(m4s)));
Result := 0;
end;
