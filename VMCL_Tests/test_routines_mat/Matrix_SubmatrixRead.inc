Function Matrix_SubmatrixRead(AutoTest: Boolean = False): Integer;
var
  m3s:    TVMCLMatrix3s;
  m4s:    TVMCLMatrix4s;
  m3d:    TVMCLMatrix3d;
  m4d:    TVMCLMatrix4d;
  C1,R1:  Integer;
  C2,R2:  Integer;
  Ident:  Boolean;
begin
WriteLn;
WriteLn(LineText('Submatrix read access'));
RandomMat(m3s); RandomMat(m4s);
RandomMat(m3d); RandomMat(m4d);
WriteLn;
C1 := Random(3); R1 := Random(3); Ident := Random(2) = 0;
WriteLn('GetSubmatrix2(m3s):'); WriteLn; Write(MatToStr(m3s)); WriteLn(Format(' (%d, %d; ident %s)',[R1,C1,BoolToStr(Ident,True)]));
WriteLn; WriteLn(MatToStr(GetSubmatrix2(m3s,R1,C1,Ident)));
WriteLn;
C1 := Random(4); R1 := Random(4); Ident := Random(2) = 0;
WriteLn('GetSubmatrix2(m4s):'); WriteLn; Write(MatToStr(m4s)); WriteLn(Format(' (%d, %d; ident %s)',[R1,C1,BoolToStr(Ident,True)]));
WriteLn; WriteLn(MatToStr(GetSubmatrix2(m4s,R1,C1,Ident)));
WriteLn;
C1 := Random(5); R1 := Random(5); Ident := Random(2) = 0;
WriteLn('GetSubmatrix3(m4s):'); WriteLn; Write(MatToStr(m4s)); WriteLn(Format(' (%d, %d; ident %s)',[R1,C1,BoolToStr(Ident,True)]));
WriteLn; WriteLn(MatToStr(GetSubmatrix3(m4s,R1,C1,Ident)));
WriteLn;
C1 := Random(3); R1 := Random(3); Ident := Random(2) = 0;
WriteLn('GetSubmatrix2(m3d):'); WriteLn; Write(MatToStr(m3d)); WriteLn(Format(' (%d, %d; ident %s)',[R1,C1,BoolToStr(Ident,True)]));
WriteLn; WriteLn(MatToStr(GetSubmatrix2(m3d,R1,C1,Ident)));
WriteLn;
C1 := Random(4); R1 := Random(4); Ident := Random(2) = 0;
WriteLn('GetSubmatrix2(m4d):'); WriteLn; Write(MatToStr(m4d)); WriteLn(Format(' (%d, %d; ident %s)',[R1,C1,BoolToStr(Ident,True)]));
WriteLn; WriteLn(MatToStr(GetSubmatrix2(m4d,R1,C1,Ident)));
WriteLn;
C1 := Random(5); R1 := Random(5); Ident := Random(2) = 0;
WriteLn('GetSubmatrix3(m4d):'); WriteLn; Write(MatToStr(m4d)); WriteLn(Format(' (%d, %d; ident %s)',[R1,C1,BoolToStr(Ident,True)]));
WriteLn; WriteLn(MatToStr(GetSubmatrix3(m4d,R1,C1,Ident)));
WriteLn;
WriteLn(Splitter);
RandomMat(m3s); RandomMat(m4s);
RandomMat(m3d); RandomMat(m4d);
WriteLn;
C1 := Random(3); R1 := Random(4);
WriteLn('ExtractSubmatrix2(m3s):'); WriteLn; Write(MatToStr(m3s)); WriteLn(Format(' (%d, %d)',[R1,C1]));
WriteLn; WriteLn(MatToStr(ExtractSubmatrix2(m3s,R1,C1)));
WriteLn;
C1 := Random(4); R1 := Random(5); C2 := Random(4); R2 := Random(4);
WriteLn('ExtractSubmatrix2(m4s):'); WriteLn; Write(MatToStr(m4s)); WriteLn(Format(' (%d, %d, %d, %d)',[R1,R2,C1,C2]));
WriteLn; WriteLn(MatToStr(ExtractSubmatrix2(m4s,R1,R2,C1,C2)));
WriteLn;
C1 := Random(5); R1 := Random(5);
WriteLn('ExtractSubmatrix3(m4s):'); WriteLn; Write(MatToStr(m4s)); WriteLn(Format(' (%d, %d)',[R1,C1]));
WriteLn; WriteLn(MatToStr(ExtractSubmatrix3(m4s,R1,C1)));
WriteLn;
C1 := Random(3); R1 := Random(4);
WriteLn('ExtractSubmatrix2(m3d):'); WriteLn; Write(MatToStr(m3d)); WriteLn(Format(' (%d, %d)',[R1,C1]));
WriteLn; WriteLn(MatToStr(ExtractSubmatrix2(m3d,R1,C1)));
WriteLn;
C1 := Random(4); R1 := Random(5); C2 := Random(4); R2 := Random(4);
WriteLn('ExtractSubmatrix2(m4d):'); WriteLn; Write(MatToStr(m4d)); WriteLn(Format(' (%d, %d, %d, %d)',[R1,R2,C1,C2]));
WriteLn; WriteLn(MatToStr(ExtractSubmatrix2(m4d,R1,R2,C1,C2)));
WriteLn;
C1 := Random(5); R1 := Random(5);
WriteLn('ExtractSubmatrix3(m4d):'); WriteLn; Write(MatToStr(m4d)); WriteLn(Format(' (%d, %d)',[R1,C1]));
WriteLn; WriteLn(MatToStr(ExtractSubmatrix3(m4d,R1,C1)));
Result := 0;
end;
